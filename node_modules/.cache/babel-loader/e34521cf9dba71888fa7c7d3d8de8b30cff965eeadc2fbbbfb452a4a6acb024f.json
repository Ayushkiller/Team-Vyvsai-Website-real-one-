{"ast":null,"code":"import React,{useState,useCallback}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import Cookies from'js-cookie';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{setAuth}=_ref;const[formData,setFormData]=useState({mobileNo:'',password:''});const[submitStatus,setSubmitStatus]=useState({error:'',isLoading:false});const navigate=useNavigate();const handleChange=useCallback(e=>{const{name,value}=e.target;setFormData(prevData=>({...prevData,[name]:value}));},[]);const handleSubmit=async e=>{e.preventDefault();setSubmitStatus({error:'',isLoading:true});try{const response=await axios.post('http://localhost:5000/api/login',formData);if(response.data.success){Cookies.set('auth','true');setAuth(true);navigate('/');}else{setSubmitStatus({error:response.data.message||'An unexpected error occurred during login',isLoading:false});}}catch(err){console.error('Login error:',err);setSubmitStatus({error:'An error occurred during login. Please try again.',isLoading:false});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),submitStatus.error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:submitStatus.error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"mobileNo\",placeholder:\"Mobile Number\",value:formData.mobileNo,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:submitStatus.isLoading,children:submitStatus.isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Don't have an account? Register here\"})]});};export default Login;","map":{"version":3,"names":["React","useState","useCallback","Link","useNavigate","axios","Cookies","jsx","_jsx","jsxs","_jsxs","Login","_ref","setAuth","formData","setFormData","mobileNo","password","submitStatus","setSubmitStatus","error","isLoading","navigate","handleChange","e","name","value","target","prevData","handleSubmit","preventDefault","response","post","data","success","set","message","err","console","className","children","onSubmit","type","placeholder","onChange","required","disabled","to"],"sources":["E:/Team-Vyvsai-Website-real-one-/vyvsai-website/src/components/Login/Login.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport './Login.css';\r\n\r\nconst Login = ({ setAuth }) => {\r\n  const [formData, setFormData] = useState({ mobileNo: '', password: '' });\r\n  const [submitStatus, setSubmitStatus] = useState({ error: '', isLoading: false });\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = useCallback((e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({ ...prevData, [name]: value }));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSubmitStatus({ error: '', isLoading: true });\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/login', formData);\r\n      \r\n      if (response.data.success) {\r\n        Cookies.set('auth', 'true');\r\n        setAuth(true);\r\n        navigate('/');\r\n      } else {\r\n        setSubmitStatus({ error: response.data.message || 'An unexpected error occurred during login', isLoading: false });\r\n      }\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      setSubmitStatus({ error: 'An error occurred during login. Please try again.', isLoading: false });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2>Login</h2>\r\n      {submitStatus.error && <p className=\"error\">{submitStatus.error}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"mobileNo\"\r\n          placeholder=\"Mobile Number\"\r\n          value={formData.mobileNo}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={formData.password}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <button type=\"submit\" disabled={submitStatus.isLoading}>\r\n          {submitStatus.isLoading ? 'Logging in...' : 'Login'}\r\n        </button>\r\n      </form>\r\n      <Link to=\"/register\">Don't have an account? Register here</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACpD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,CAAEe,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACxE,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGlB,QAAQ,CAAC,CAAEmB,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CACjF,KAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAmB,YAAY,CAAGrB,WAAW,CAAEsB,CAAC,EAAK,CACtC,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCZ,WAAW,CAAEa,QAAQ,GAAM,CAAE,GAAGA,QAAQ,CAAE,CAACH,IAAI,EAAGC,KAAM,CAAC,CAAC,CAAC,CAC7D,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAL,CAAC,EAAK,CAChCA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClBX,eAAe,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,IAAK,CAAC,CAAC,CAE/C,GAAI,CACF,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,IAAI,CAAC,iCAAiC,CAAElB,QAAQ,CAAC,CAE9E,GAAIiB,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAE,CACzB5B,OAAO,CAAC6B,GAAG,CAAC,MAAM,CAAE,MAAM,CAAC,CAC3BtB,OAAO,CAAC,IAAI,CAAC,CACbS,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,IAAM,CACLH,eAAe,CAAC,CAAEC,KAAK,CAAEW,QAAQ,CAACE,IAAI,CAACG,OAAO,EAAI,2CAA2C,CAAEf,SAAS,CAAE,KAAM,CAAC,CAAC,CACpH,CACF,CAAE,MAAOgB,GAAG,CAAE,CACZC,OAAO,CAAClB,KAAK,CAAC,cAAc,CAAEiB,GAAG,CAAC,CAClClB,eAAe,CAAC,CAAEC,KAAK,CAAE,mDAAmD,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CACnG,CACF,CAAC,CAED,mBACEX,KAAA,QAAK6B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhC,IAAA,OAAAgC,QAAA,CAAI,OAAK,CAAI,CAAC,CACbtB,YAAY,CAACE,KAAK,eAAIZ,IAAA,MAAG+B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEtB,YAAY,CAACE,KAAK,CAAI,CAAC,cACpEV,KAAA,SAAM+B,QAAQ,CAAEZ,YAAa,CAAAW,QAAA,eAC3BhC,IAAA,UACEkC,IAAI,CAAC,MAAM,CACXjB,IAAI,CAAC,UAAU,CACfkB,WAAW,CAAC,eAAe,CAC3BjB,KAAK,CAAEZ,QAAQ,CAACE,QAAS,CACzB4B,QAAQ,CAAErB,YAAa,CACvBsB,QAAQ,MACT,CAAC,cACFrC,IAAA,UACEkC,IAAI,CAAC,UAAU,CACfjB,IAAI,CAAC,UAAU,CACfkB,WAAW,CAAC,UAAU,CACtBjB,KAAK,CAAEZ,QAAQ,CAACG,QAAS,CACzB2B,QAAQ,CAAErB,YAAa,CACvBsB,QAAQ,MACT,CAAC,cACFrC,IAAA,WAAQkC,IAAI,CAAC,QAAQ,CAACI,QAAQ,CAAE5B,YAAY,CAACG,SAAU,CAAAmB,QAAA,CACpDtB,YAAY,CAACG,SAAS,CAAG,eAAe,CAAG,OAAO,CAC7C,CAAC,EACL,CAAC,cACPb,IAAA,CAACL,IAAI,EAAC4C,EAAE,CAAC,WAAW,CAAAP,QAAA,CAAC,sCAAoC,CAAM,CAAC,EAC7D,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}