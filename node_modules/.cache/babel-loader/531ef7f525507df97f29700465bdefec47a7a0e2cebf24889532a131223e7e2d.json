{"ast":null,"code":"import React,{useState,useCallback}from\"react\";import{Link}from\"react-router-dom\";import registerService from\"../../services/registerService\";import\"./Register.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({username:\"\",mobileNo:\"\",email:\"\",password:\"\",preferences:\"\"});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[submitStatus,setSubmitStatus]=useState({error:\"\",success:false});const validateForm=useCallback(()=>{const newErrors={};const{username,mobileNo,email,password,preferences}=formData;if(!username.trim())newErrors.username=\"Username is required\";if(!mobileNo.trim())newErrors.mobileNo=\"Contact number is required\";else if(!/^\\d{10}$/.test(mobileNo))newErrors.mobileNo=\"Invalid contact number\";if(!email.trim())newErrors.email=\"Email is required\";else if(!/\\S+@\\S+\\.\\S+/.test(email))newErrors.email=\"Invalid email address\";if(!password.trim())newErrors.password=\"Password is required\";else if(password.length<8)newErrors.password=\"Password must be at least 8 characters\";if(!preferences)newErrors.preferences=\"Please select a preference\";return newErrors;},[formData]);const handleChange=useCallback(e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));setErrors(prev=>({...prev,[name]:\"\"}));},[]);const handleSubmit=async e=>{e.preventDefault();const formErrors=validateForm();if(Object.keys(formErrors).length>0){setErrors(formErrors);return;}setIsSubmitting(true);setSubmitStatus({error:\"\",success:false});try{await registerService.register(formData);setSubmitStatus({error:\"\",success:true});navigate(\"/\");}catch(error){var _error$response,_error$response$data;console.error(\"Error submitting data:\",error);setSubmitStatus({error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Registration failed\",success:false});}finally{setIsSubmitting(false);}};const renderFormField=function(name,label){let type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"text\";return/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:name,children:label}),/*#__PURE__*/_jsx(\"input\",{id:name,name:name,type:type,value:formData[name],onChange:handleChange,\"aria-invalid\":errors[name]?\"true\":\"false\",\"aria-describedby\":errors[name]?`${name}-error`:undefined}),errors[name]&&/*#__PURE__*/_jsx(\"p\",{id:`${name}-error`,className:\"error\",children:errors[name]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[renderFormField(\"username\",\"Username\"),renderFormField(\"mobileNo\",\"Contact Number\",\"tel\"),renderFormField(\"email\",\"Email\",\"email\"),renderFormField(\"password\",\"Password\",\"password\"),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"preferences\",children:\"Notification Preferences\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"preferences\",name:\"preferences\",value:formData.preferences,onChange:handleChange,\"aria-invalid\":errors.preferences?\"true\":\"false\",\"aria-describedby\":errors.preferences?\"preferences-error\":undefined,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select preference\"}),/*#__PURE__*/_jsx(\"option\",{value:\"government-tenders\",children:\"Government Tenders\"})]}),errors.preferences&&/*#__PURE__*/_jsx(\"p\",{id:\"preferences-error\",className:\"error\",children:errors.preferences})]}),submitStatus.error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert error\",children:/*#__PURE__*/_jsx(\"p\",{children:submitStatus.error})}),submitStatus.success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert success\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Registration successful!\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,children:isSubmitting?\"Registering...\":\"Register\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"login-link\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login here\"})]})]});};export default Register;","map":{"version":3,"names":["React","useState","useCallback","Link","registerService","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","navigate","formData","setFormData","username","mobileNo","email","password","preferences","errors","setErrors","isSubmitting","setIsSubmitting","submitStatus","setSubmitStatus","error","success","validateForm","newErrors","trim","test","length","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","formErrors","Object","keys","register","_error$response","_error$response$data","console","response","data","message","renderFormField","label","type","arguments","undefined","className","children","htmlFor","id","onChange","onSubmit","noValidate","disabled","to"],"sources":["E:/Team-Vyvsai-Website-real-one-/vyvsai-website/src/components/Login/Register.jsx"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport registerService from \"../../services/registerService\";\r\nimport \"./Register.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Register = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    mobileNo: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    preferences: \"\",\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitStatus, setSubmitStatus] = useState({\r\n    error: \"\",\r\n    success: false,\r\n  });\r\n\r\n  const validateForm = useCallback(() => {\r\n    const newErrors = {};\r\n    const { username, mobileNo, email, password, preferences } = formData;\r\n\r\n    if (!username.trim()) newErrors.username = \"Username is required\";\r\n    if (!mobileNo.trim()) newErrors.mobileNo = \"Contact number is required\";\r\n    else if (!/^\\d{10}$/.test(mobileNo))\r\n      newErrors.mobileNo = \"Invalid contact number\";\r\n    if (!email.trim()) newErrors.email = \"Email is required\";\r\n    else if (!/\\S+@\\S+\\.\\S+/.test(email))\r\n      newErrors.email = \"Invalid email address\";\r\n    if (!password.trim()) newErrors.password = \"Password is required\";\r\n    else if (password.length < 8)\r\n      newErrors.password = \"Password must be at least 8 characters\";\r\n    if (!preferences) newErrors.preferences = \"Please select a preference\";\r\n\r\n    return newErrors;\r\n  }, [formData]);\r\n\r\n  const handleChange = useCallback((e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n    setErrors((prev) => ({ ...prev, [name]: \"\" }));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formErrors = validateForm();\r\n\r\n    if (Object.keys(formErrors).length > 0) {\r\n      setErrors(formErrors);\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setSubmitStatus({ error: \"\", success: false });\r\n\r\n    try {\r\n      await registerService.register(formData);\r\n      setSubmitStatus({ error: \"\", success: true });\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Error submitting data:\", error);\r\n      setSubmitStatus({\r\n        error: error.response?.data?.message || \"Registration failed\",\r\n        success: false,\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const renderFormField = (name, label, type = \"text\") => (\r\n    <div className=\"form-group\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        id={name}\r\n        name={name}\r\n        type={type}\r\n        value={formData[name]}\r\n        onChange={handleChange}\r\n        aria-invalid={errors[name] ? \"true\" : \"false\"}\r\n        aria-describedby={errors[name] ? `${name}-error` : undefined}\r\n      />\r\n      {errors[name] && (\r\n        <p id={`${name}-error`} className=\"error\">\r\n          {errors[name]}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"register-container\">\r\n      <h1>Register</h1>\r\n      <form onSubmit={handleSubmit} noValidate>\r\n        {renderFormField(\"username\", \"Username\")}\r\n        {renderFormField(\"mobileNo\", \"Contact Number\", \"tel\")}\r\n        {renderFormField(\"email\", \"Email\", \"email\")}\r\n        {renderFormField(\"password\", \"Password\", \"password\")}\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"preferences\">Notification Preferences</label>\r\n          <select\r\n            id=\"preferences\"\r\n            name=\"preferences\"\r\n            value={formData.preferences}\r\n            onChange={handleChange}\r\n            aria-invalid={errors.preferences ? \"true\" : \"false\"}\r\n            aria-describedby={\r\n              errors.preferences ? \"preferences-error\" : undefined\r\n            }\r\n          >\r\n            <option value=\"\">Select preference</option>\r\n            <option value=\"government-tenders\">Government Tenders</option>\r\n          </select>\r\n          {errors.preferences && (\r\n            <p id=\"preferences-error\" className=\"error\">\r\n              {errors.preferences}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {submitStatus.error && (\r\n          <div className=\"alert error\">\r\n            <p>{submitStatus.error}</p>\r\n          </div>\r\n        )}\r\n        {submitStatus.success && (\r\n          <div className=\"alert success\">\r\n            <p>Registration successful!</p>\r\n          </div>\r\n        )}\r\n\r\n        <button type=\"submit\" disabled={isSubmitting}>\r\n          {isSubmitting ? \"Registering...\" : \"Register\"}\r\n        </button>\r\n      </form>\r\n      <p className=\"login-link\">\r\n        Already have an account? <Link to=\"/login\">Login here</Link>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACpD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,gBAAgB,CACvB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACO,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,CACvCa,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EACf,CAAC,CAAC,CAEF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxC,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAAC,CAC/CwB,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,KACX,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAGzB,WAAW,CAAC,IAAM,CACrC,KAAM,CAAA0B,SAAS,CAAG,CAAC,CAAC,CACpB,KAAM,CAAEd,QAAQ,CAAEC,QAAQ,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAGN,QAAQ,CAErE,GAAI,CAACE,QAAQ,CAACe,IAAI,CAAC,CAAC,CAAED,SAAS,CAACd,QAAQ,CAAG,sBAAsB,CACjE,GAAI,CAACC,QAAQ,CAACc,IAAI,CAAC,CAAC,CAAED,SAAS,CAACb,QAAQ,CAAG,4BAA4B,CAAC,IACnE,IAAI,CAAC,UAAU,CAACe,IAAI,CAACf,QAAQ,CAAC,CACjCa,SAAS,CAACb,QAAQ,CAAG,wBAAwB,CAC/C,GAAI,CAACC,KAAK,CAACa,IAAI,CAAC,CAAC,CAAED,SAAS,CAACZ,KAAK,CAAG,mBAAmB,CAAC,IACpD,IAAI,CAAC,cAAc,CAACc,IAAI,CAACd,KAAK,CAAC,CAClCY,SAAS,CAACZ,KAAK,CAAG,uBAAuB,CAC3C,GAAI,CAACC,QAAQ,CAACY,IAAI,CAAC,CAAC,CAAED,SAAS,CAACX,QAAQ,CAAG,sBAAsB,CAAC,IAC7D,IAAIA,QAAQ,CAACc,MAAM,CAAG,CAAC,CAC1BH,SAAS,CAACX,QAAQ,CAAG,wCAAwC,CAC/D,GAAI,CAACC,WAAW,CAAEU,SAAS,CAACV,WAAW,CAAG,4BAA4B,CAEtE,MAAO,CAAAU,SAAS,CAClB,CAAC,CAAE,CAAChB,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAoB,YAAY,CAAG9B,WAAW,CAAE+B,CAAC,EAAK,CACtC,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCvB,WAAW,CAAEwB,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE,CAACH,IAAI,EAAGC,KAAM,CAAC,CAAC,CAAC,CACnDf,SAAS,CAAEiB,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE,CAACH,IAAI,EAAG,EAAG,CAAC,CAAC,CAAC,CAChD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAL,CAAC,EAAK,CAChCA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,UAAU,CAAGb,YAAY,CAAC,CAAC,CAEjC,GAAIc,MAAM,CAACC,IAAI,CAACF,UAAU,CAAC,CAACT,MAAM,CAAG,CAAC,CAAE,CACtCX,SAAS,CAACoB,UAAU,CAAC,CACrB,OACF,CAEAlB,eAAe,CAAC,IAAI,CAAC,CACrBE,eAAe,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,KAAM,CAAC,CAAC,CAE9C,GAAI,CACF,KAAM,CAAAtB,eAAe,CAACuC,QAAQ,CAAC/B,QAAQ,CAAC,CACxCY,eAAe,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAC7Cf,QAAQ,CAAC,GAAG,CAAC,CACf,CAAE,MAAOc,KAAK,CAAE,KAAAmB,eAAA,CAAAC,oBAAA,CACdC,OAAO,CAACrB,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CD,eAAe,CAAC,CACdC,KAAK,CAAE,EAAAmB,eAAA,CAAAnB,KAAK,CAACsB,QAAQ,UAAAH,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBI,IAAI,UAAAH,oBAAA,iBAApBA,oBAAA,CAAsBI,OAAO,GAAI,qBAAqB,CAC7DvB,OAAO,CAAE,KACX,CAAC,CAAC,CACJ,CAAC,OAAS,CACRJ,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAA4B,eAAe,CAAG,QAAAA,CAAChB,IAAI,CAAEiB,KAAK,KAAE,CAAAC,IAAI,CAAAC,SAAA,CAAAtB,MAAA,IAAAsB,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,MAAM,oBACjD5C,KAAA,QAAK8C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjD,IAAA,UAAOkD,OAAO,CAAEvB,IAAK,CAAAsB,QAAA,CAAEL,KAAK,CAAQ,CAAC,cACrC5C,IAAA,UACEmD,EAAE,CAAExB,IAAK,CACTA,IAAI,CAAEA,IAAK,CACXkB,IAAI,CAAEA,IAAK,CACXjB,KAAK,CAAEvB,QAAQ,CAACsB,IAAI,CAAE,CACtByB,QAAQ,CAAE3B,YAAa,CACvB,eAAcb,MAAM,CAACe,IAAI,CAAC,CAAG,MAAM,CAAG,OAAQ,CAC9C,mBAAkBf,MAAM,CAACe,IAAI,CAAC,CAAG,GAAGA,IAAI,QAAQ,CAAGoB,SAAU,CAC9D,CAAC,CACDnC,MAAM,CAACe,IAAI,CAAC,eACX3B,IAAA,MAAGmD,EAAE,CAAE,GAAGxB,IAAI,QAAS,CAACqB,SAAS,CAAC,OAAO,CAAAC,QAAA,CACtCrC,MAAM,CAACe,IAAI,CAAC,CACZ,CACJ,EACE,CAAC,EACP,CAED,mBACEzB,KAAA,QAAK8C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCjD,IAAA,OAAAiD,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjB/C,KAAA,SAAMmD,QAAQ,CAAEtB,YAAa,CAACuB,UAAU,MAAAL,QAAA,EACrCN,eAAe,CAAC,UAAU,CAAE,UAAU,CAAC,CACvCA,eAAe,CAAC,UAAU,CAAE,gBAAgB,CAAE,KAAK,CAAC,CACpDA,eAAe,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAC1CA,eAAe,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,cAEpDzC,KAAA,QAAK8C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjD,IAAA,UAAOkD,OAAO,CAAC,aAAa,CAAAD,QAAA,CAAC,0BAAwB,CAAO,CAAC,cAC7D/C,KAAA,WACEiD,EAAE,CAAC,aAAa,CAChBxB,IAAI,CAAC,aAAa,CAClBC,KAAK,CAAEvB,QAAQ,CAACM,WAAY,CAC5ByC,QAAQ,CAAE3B,YAAa,CACvB,eAAcb,MAAM,CAACD,WAAW,CAAG,MAAM,CAAG,OAAQ,CACpD,mBACEC,MAAM,CAACD,WAAW,CAAG,mBAAmB,CAAGoC,SAC5C,CAAAE,QAAA,eAEDjD,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAAqB,QAAA,CAAC,mBAAiB,CAAQ,CAAC,cAC3CjD,IAAA,WAAQ4B,KAAK,CAAC,oBAAoB,CAAAqB,QAAA,CAAC,oBAAkB,CAAQ,CAAC,EACxD,CAAC,CACRrC,MAAM,CAACD,WAAW,eACjBX,IAAA,MAAGmD,EAAE,CAAC,mBAAmB,CAACH,SAAS,CAAC,OAAO,CAAAC,QAAA,CACxCrC,MAAM,CAACD,WAAW,CAClB,CACJ,EACE,CAAC,CAELK,YAAY,CAACE,KAAK,eACjBlB,IAAA,QAAKgD,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BjD,IAAA,MAAAiD,QAAA,CAAIjC,YAAY,CAACE,KAAK,CAAI,CAAC,CACxB,CACN,CACAF,YAAY,CAACG,OAAO,eACnBnB,IAAA,QAAKgD,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BjD,IAAA,MAAAiD,QAAA,CAAG,0BAAwB,CAAG,CAAC,CAC5B,CACN,cAEDjD,IAAA,WAAQ6C,IAAI,CAAC,QAAQ,CAACU,QAAQ,CAAEzC,YAAa,CAAAmC,QAAA,CAC1CnC,YAAY,CAAG,gBAAgB,CAAG,UAAU,CACvC,CAAC,EACL,CAAC,cACPZ,KAAA,MAAG8C,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,2BACC,cAAAjD,IAAA,CAACJ,IAAI,EAAC4D,EAAE,CAAC,QAAQ,CAAAP,QAAA,CAAC,YAAU,CAAM,CAAC,EAC3D,CAAC,EACD,CAAC,CAEV,CAAC,CAED,cAAe,CAAA9C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}