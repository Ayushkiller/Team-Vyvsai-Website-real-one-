"use strict";(self.webpackChunkvyvsai_website=self.webpackChunkvyvsai_website||[]).push([[249],{249:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var a=t(43),r=t(213),c=t(579);r.A.defaults.baseURL="https://localhost:5000/api";const l=()=>{const[e,s]=(0,a.useState)(""),[t,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[m,h]=(0,a.useState)({states:[],districts:[],departments:[]}),[x,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(""),[u,N]=(0,a.useState)(null);(0,a.useEffect)((()=>{v()}),[]);const v=async()=>{p(!0);try{console.log("Fetching states...");const e=await r.A.get("/states");console.log("States response:",e.data),h((s=>({...s,states:e.data.states})))}catch(e){console.error("Error fetching states:",e),console.error("Error details:",e.response),g(`Error fetching states: ${e.message}`)}finally{p(!1)}};return(0,c.jsxs)("div",{className:"container mt-5 pt-4",children:[(0,c.jsx)("h1",{className:"mb-4",children:"Tender Search"}),x&&(0,c.jsx)("p",{children:"Loading..."}),j&&(0,c.jsx)("p",{className:"text-danger",children:j}),(0,c.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),p(!0),g("");try{const s=await r.A.get("/tenders",{params:{state:e,district:t,department:n,showExpired:d}});N(s.data.tenders)}catch(a){g("Error fetching tender details"),console.error("Error fetching tender details:",a)}finally{p(!1)}},children:[(0,c.jsxs)("div",{className:"row mb-3",children:[(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"state",className:"form-label",children:"State:"}),(0,c.jsxs)("select",{id:"state",name:"state",className:"form-select",required:!0,value:e,onChange:async e=>{const t=e.target.value;if(s(t),l(""),i(""),t)try{const[e,s]=await Promise.all([r.A.get(`/districts/${t}`),r.A.get(`/departments/${t}`)]);h((t=>({...t,districts:e.data.districts,departments:s.data.departments})))}catch(a){g("Error fetching districts or departments"),console.error("Error fetching districts or departments:",a)}else h((e=>({...e,districts:[],departments:[]})))},children:[(0,c.jsx)("option",{value:"",children:"Select a State"}),m.states.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"district",className:"form-label",children:"District:"}),(0,c.jsxs)("select",{id:"district",name:"district",className:"form-select",value:t,onChange:e=>l(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select a District"}),m.districts.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"department",className:"form-label",children:"Department:"}),(0,c.jsxs)("select",{id:"department",name:"department",className:"form-select",value:n,onChange:e=>i(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select a Department"}),m.departments.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsxs)("div",{className:"form-check mt-4",children:[(0,c.jsx)("input",{type:"checkbox",className:"form-check-input",id:"showExpired",checked:d,onChange:e=>o(e.target.checked)}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"showExpired",children:"Show Expired Tenders"})]})})]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Search Tenders"})]}),u&&u.length>0&&(0,c.jsxs)("div",{className:"mt-5",children:[(0,c.jsx)("h2",{className:"mb-4",children:"Tender Details"}),u.map(((e,s)=>(0,c.jsx)("div",{className:"card mb-4",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h5",{className:"card-title",children:e.title}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Tender ID:"})," ",e.tender_id]}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Organization:"})," ",e.org_name]}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Category:"})," ",e.category]}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Price:"})," ",e.price]}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Address:"})," ",e.address]}),(0,c.jsxs)("p",{className:"card-text",children:[(0,c.jsx)("strong",{children:"Closing Date:"})," ",e.closing_date]}),e.boq&&e.boq.length?(0,c.jsx)("a",{href:e.boq,className:"btn btn-primary",download:!0,children:"Download BOQ"}):(0,c.jsx)("span",{className:"text-muted",children:"No BOQ available"})]})},s)))]})]})}}}]);
//# sourceMappingURL=249.f493a8ab.chunk.js.map